function GameObject(t,e,i,s,o,n,r,h){this.sprite=null,this.x=0,null!=e&&(this.x=e),this.y=0,null!=i&&(this.y=i),this.classename=s,this.w=0,null!=o&&(this.w=o),this.h=0,null!=n&&(this.h=n),this.z=0,null!=h&&(this.z=h),this.r=0,null!=r&&(this.r=r),null!=t&&(this.sprite=loader.getAssets(t),this.currentsprite=0,0==this.h&&(this.h=this.sprite.height),0==this.w&&(this.w=this.sprite.width)),this.linklevel=mlevel.currentLevel}function Levels(t){this.objects=[],null!=t&&(this.objects=t),this.clean=!0}function Background(t,e,i,s,o){GameObject.call(this,t,e,i,"background",s,o),this.z=0}function Bullet(t,e,i,s,o,n,r){GameObject.call(this,t,e,i,"bullet",n,r),this.velocity=s,this.radius=o,this.nofire=["bullet","background"],this.fire=[],this.isremoving=!1,this.z=99}function ManagerInputs(){this.DIREITA=!1,this.ESQUERDA=!1,this.CIMA=!1,this.BAIXO=!1,this.ESPACO=!1,this.start()}function ManagerLevel(){this.nameplayer="",this.currentLevel=0,this.levels=[],this.score=0}function ManagerLoader(t){this.folder="assets/",this.starterfolder="resource/",this.assetsList=[],this.assetsListLoaded=[],this.checkAssetsList=0,this.callback=t}function Text(t,e,i,s,o,n){GameObject.call(this,void 0,e,i,"gui"),this.text=t,this.color="#FFF",this.size="10px",this.size="Arial",null!=s&&(this.color=s),null!=o&&(this.size=o),null!=n&&(this.font=n),this.z=100}function InputText(t,e,i,s,o){GameObject.call(this,void 0,t,e,"gui"),this.text="",this.color="#FFF",this.size="10",this.size="Arial",this.isfocus=!0,null!=i&&(this.color=i),null!=s&&(this.size=s),null!=o&&(this.font=o),this.blocked=!1,this.maxsize=10,this.z=100,this.start()}function Geometric(t,e,i,s,o,n,r,h,l){GameObject.call(this,void 0,t,e,i,s,o,h,l),this.stroke=null,null!=r&&(this.stroke=r),this.fill=null,null!=n&&(this.fill=n),this.linew=1}function Triangle(t,e,i,s,o){Geometric.call(this,t[0],t[1],"triangle",void 0,void 0,s,o),this.p1=t,this.p2=e,this.p3=i}function Circle(t,e,i,s,o){Geometric.call(this,t,e,"rect",void 0,void 0,s,o),this.radius=i}function Rect(t,e,i,s,o,n){Geometric.call(this,t,e,"rect",s,i,o,n)}function Turtle(){this.x=canvas.width/2,this.y=canvas.height/2,this.linew=1,this.pendown=!0,this.penolddown=!0,this.stakemoviment=[],this.stakealdlines=[],this.stepcurrent=0,this.velocity=10,this.isnewcommand=!0,this.color={r:0,g:0,b:0},this.imgturtle=new GameObject("turtle",0,0,"turtle",40,40),this.lastcolor="",this.changecolorup=!0}GameObject.prototype.update=function(){},GameObject.prototype.print=function(){ctx.drawImage(this.sprite,this.x,this.y,this.w,this.h)},GameObject.prototype.setRotate=function(t){this.r=t},GameObject.prototype.setPosition=function(t,e){this.x=t,this.y=e},GameObject.prototype.setPositionByObject=function(t,e){"top"==e&&(this.x=t.x+t.w/2-this.w/2,this.y=t.y-this.h)},GameObject.prototype.setWidth=function(t){this.w=t},GameObject.prototype.getWidth=function(){return this.w},GameObject.prototype.setHeight=function(t){this.h=t},GameObject.prototype.getHeight=function(){return this.h},GameObject.prototype.setSize=function(t,e){this.w=t,this.h=e},GameObject.prototype.translate=function(t,e){this.x+=t,this.y+=e},Levels.prototype.addObjects=function(t){this.objects.push(t)},Levels.prototype.startFunction=function(){},Levels.prototype.print=function(){this.objects.sort(function(t,e){return t.z-e.z});for(var t=0;t<this.objects.length;t++)this.objects[t].update(),null!=this.objects[t]&&this.objects[t].print(ctx)},Levels.prototype.setFunctionStart=function(t){this.startFunction=t},Levels.prototype.setObjects=function(t){this.objects=t},Background.prototype=Object.create(GameObject.prototype),Background.prototype.print=function(t){var e=t.createPattern(this.sprite,"repeat");t.fillStyle=e,t.fillRect(0,0,this.w,this.h)},Bullet.prototype=Object.create(GameObject.prototype),Bullet.prototype.setNoFire=function(t){this.nofire.push(t)},Bullet.prototype.setFire=function(t){this.fire.push(t)},Bullet.prototype.update=function(){(this.y<0||this.y>canvas.height)&&mlevel.levels[this.linklevel].objects.splice(mlevel.levels[this.linklevel].objects.indexOf(this),1),this.y+=this.velocity;for(var t=0;t<mlevel.getCurrentLevel().objects.length;t++)if(!this.isremoving){for(var e=mlevel.getCurrentLevel().objects[t],i=0;i<this.nofire.length;i++)e.classename,this.nofire[i];if(this.x+this.w>e.x&&this.x<e.x+e.w&&this.y+this.h>e.y&&this.y<e.y+e.w)for(i=0;i<this.fire.length;i++)e.classename==this.fire[i][0]&&("custom"==this.fire[i][1]?this.fire[i][2]():"kill"==this.fire[i][1]&&e.fired(),this.remove())}},Bullet.prototype.remove=function(){this.isremoving||(this.isremoving=!0,mlevel.removeObject(this))},ManagerStorage=function(){},ManagerStorage.prototype.setItem=function(t,e){localStorage.setItem(t,e)},ManagerStorage.prototype.getItem=function(t){return localStorage.getItem(t)},ManagerStorage.prototype.setItemJSON=function(t,e){localStorage.setItem(t,JSON.stringify(e))},ManagerStorage.prototype.getItemJSON=function(t,e){return JSON.parse(localStorage.getItem(t))},ManagerInputs.prototype.start=function(){document.addEventListener("keydown",function(t){38==t.keyCode&&(this.CIMA=!0),40==t.keyCode&&(this.BAIXO=!0),37==t.keyCode&&(this.ESQUERDA=!0),39==t.keyCode&&(this.DIREITA=!0),32==t.keyCode&&(this.ESPACO=!0)}.bind(this)),document.addEventListener("keyup",function(t){38==t.keyCode&&(this.CIMA=!1),40==t.keyCode&&(this.BAIXO=!1),37==t.keyCode&&(this.ESQUERDA=!1),39==t.keyCode&&(this.DIREITA=!1),32==t.keyCode&&(this.ESPACO=!1)}.bind(this))},ManagerLevel.prototype.addLevel=function(t){this.levels.push(t)},ManagerLevel.prototype.loadLevel=function(t){this.currentLevel=t,this.getCurrentLevel().setObjects([]),this.getCurrentLevel().startFunction()},ManagerLevel.prototype.nextLevel=function(){this.currentLevel++,this.getCurrentLevel().setObjects([]),this.getCurrentLevel().startFunction()},ManagerLevel.prototype.priorLevel=function(){this.currentLevel--,this.getCurrentLevel().setObjects([]),this.getCurrentLevel().startFunction()},ManagerLevel.prototype.getCurrentLevel=function(){return this.levels[this.currentLevel]},ManagerLevel.prototype.print=function(){this.levels[this.currentLevel].clean&&(ctx.save(),ctx.setTransform(1,0,0,1,0,0),ctx.clearRect(0,0,canvas.width,canvas.height),ctx.restore()),this.levels[this.currentLevel].print(ctx)},ManagerLevel.prototype.getLevel=function(t){return this.levels[t]},ManagerLevel.prototype.getObjectByLevel=function(t){return this.levels[t].objects},ManagerLevel.prototype.removeObject=function(t){this.getObjectByLevel(t.linklevel).splice(this.getObjectByLevel(t.linklevel).indexOf(t),1)},ManagerLevel.prototype.addScore=function(){this.score++},ManagerLevel.prototype.gameOver=function(){scores=storage.getItemJSON("score1");for(var t=0;t<scores.length;t++)if(scores[t].score<this.score){console.log("new score"),scores[t].name=mlevel.nameplayer,scores[t].score=this.score,storage.setItemJSON("score1",scores);break}this.loadLevel(0)},ManagerLevel.prototype.createNewEnemy=function(t){enemy=new Enemy("enemyred",500*Math.random(),-50,"enemy"),enemy.aceleration=t+.2,this.levels[this.currentLevel].objects.push(enemy)},ManagerLevel.prototype.killEnemy=function(t){this.addScore(),this.removeObject(t),this.createNewEnemy(t.aceleration)},ManagerLoader.prototype.addResource=function(t,e,i){this.assetsList.push([t,e,i,"user"])},ManagerLoader.prototype.addStarterResource=function(t,e,i){this.assetsList.push([t,e,i,"starter"])},ManagerLoader.prototype.addImage=function(t,e){this.assetsList.push([t,e,"image","user"])},ManagerLoader.prototype.addAudio=function(t,e){this.assetsList.push([t,e,"audio","user"])},ManagerLoader.prototype.loading=function(){for(var t=0;t<this.assetsList.length;t++)this.assetsListLoaded.push(new Image),this.assetsListLoaded[this.assetsListLoaded.length-1].onload=function(){this.checkAssetsList++,this.checkAssetsList==this.assetsList.length?(this.printWithOutLoad(),setTimeout(this.callback,2e3)):this.print()}.bind(this),"user"==this.assetsList[t][3]?this.assetsListLoaded[this.assetsListLoaded.length-1].src=this.folder+this.assetsList[t][1]:this.assetsListLoaded[this.assetsListLoaded.length-1].src=this.starterfolder+this.assetsList[t][1]},ManagerLoader.prototype.getAssets=function(t){for(var e=null,i=0;i<this.assetsList.length;i++)this.assetsList[i][0]==t&&(e=this.assetsListLoaded[i]);return e},ManagerLoader.prototype.print=function(){porcentload=100*this.checkAssetsList/this.assetsListLoaded.length/100,ctx.fillStyle="#008080ff",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.lineWidth="2",ctx.strokeStyle="#FFFFFF",ctx.beginPath(),x=canvas.width/2-160,y=canvas.height/2+200,ctx.moveTo(x,y),ctx.lineTo(x+300,y),ctx.quadraticCurveTo(x+310,y+15,x+300,y+30),ctx.lineTo(x,y+30),ctx.quadraticCurveTo(x-10,y+15,x,y),ctx.stroke(),x+=5,y+=5,ctx.beginPath(),ctx.moveTo(x,y),ctx.lineTo(porcentload*x+290,y),ctx.lineTo(porcentload*x+290,y+20),ctx.lineTo(x,y+20),ctx.quadraticCurveTo(x-10,y+10,x,y),ctx.fillStyle="#FFFFFF",ctx.fill(),img=document.getElementById("logohtml"),ctx.drawImage(img,canvas.width/2-150,canvas.height/2-220,300,350),ctx.font="15px Verdana",text=parseInt(100*porcentload)+"%",ctx.textAlign="center",ctx.fillText("Loaded "+text,canvas.width/2,canvas.height/2+250)},ManagerLoader.prototype.printWithOutLoad=function(){ctx.fillStyle="#008080ff",ctx.fillRect(0,0,canvas.width,canvas.height),img=document.getElementById("logohtml"),ctx.drawImage(img,canvas.width/2-150,canvas.height/2-220,300,350)},Text.prototype=Object.create(GameObject.prototype),Text.prototype.print=function(){ctx.fillStyle=this.color,ctx.font=this.size+" "+this.font,ctx.fillText(this.text,this.x,this.y)},InputText.prototype=Object.create(GameObject.prototype),InputText.prototype.start=function(){document.addEventListener("keydown",function(t){if(!this.blocked){if(this.blocked=!0,8==event.keyCode)return void(this.text=this.text.slice(0,-1));(event.keyCode>=65&&event.keyCode<90||event.keyCode>=97&&event.keyCode<122)&&(this.text+=String.fromCharCode(t.keyCode))}}.bind(this)),document.addEventListener("keyup",function(t){this.blocked=!1}.bind(this))},InputText.prototype.print=function(){ctx.fillStyle=this.color,ctx.font=this.size+"px "+this.font,ctx.fillText(this.text,this.x,this.y),ctx.beginPath(),this.text.length>5?(ctx.moveTo(this.x-this.text.length/2*this.size,this.y+2),ctx.lineTo(this.x-this.text.length/2*this.size+this.text.length*this.size,this.y+2)):(ctx.moveTo(this.x-2.5*this.size,this.y+2),ctx.lineTo(this.x-2.5*this.size+5*this.size,this.y+2)),ctx.stroke()},InputText.prototype.setText=function(t){this.text=t},InputText.prototype.setMaxSize=function(t){this.maxsize=t},Geometric.prototype=Object.create(GameObject.prototype),Geometric.prototype.setFill=function(t){this.fill=t},Geometric.prototype.clearFill=function(t){this.fill=null},Geometric.prototype.setStroke=function(t){this.stroke=t},Geometric.prototype.clearStroke=function(){this.stroke=null},Geometric.prototype.setLineWidth=function(t){this.linew=t},Geometric.prototype.getLineWidth=function(){return this.linew},Triangle.prototype=Object.create(Geometric.prototype),Triangle.prototype.print=function(){var t=(this.p1[0]+this.p2[0]+this.p3[0])/3,e=(this.p1[1]+this.p2[1]+this.p3[1])/3;ctx.fillRect(t,e,10,10),ctx.save(),ctx.translate(t,e),ctx.rotate(this.r*Math.PI/180),ctx.translate(-t,-e),ctx.beginPath(),ctx.moveTo(this.p1[0],this.p1[1]),ctx.lineTo(this.p2[0],this.p2[1]),ctx.lineTo(this.p3[0],this.p3[1]),ctx.lineTo(this.p1[0],this.p1[1]),null!=this.fill&&(ctx.fillStyle=this.fill,ctx.fill()),null!=this.stroke&&(ctx.strokeStyle=this.stroke,ctx.stroke()),ctx.restore()},Triangle.prototype.translate=function(t,e){this.p1[0]+=t,this.p2[0]+=t,this.p3[0]+=t,this.p1[1]+=e,this.p2[1]+=e,this.p3[1]+=e},Circle.prototype=Object.create(Geometric.prototype),Circle.prototype.print=function(){var t=this.x+this.radius/2,e=this.y+this.radius/2;ctx.save(),ctx.translate(t,e),ctx.rotate(this.r*Math.PI/180),ctx.translate(-t,-e),ctx.beginPath(),ctx.arc(this.x+this.radius/2,this.y+this.radius/2,this.radius,0,2*Math.PI),null!=this.fill&&(ctx.fillStyle=this.fill,ctx.fill()),null!=this.stroke&&(ctx.strokeStyle=this.stroke,ctx.stroke()),ctx.restore()},Rect.prototype=Object.create(Geometric.prototype),Rect.prototype.print=function(){this.x,this.w,this.y,this.h;ctx.save(),ctx.translate(this.x+this.w/2,this.y+this.h/2),ctx.rotate(this.r*Math.PI/180),null!=this.fill&&(ctx.fillStyle=this.fill,ctx.fillRect(-this.w/2,-this.h/2,this.w,this.h)),null!=this.stroke&&(ctx.strokeStyle=this.stroke,ctx.lineWidth=this.linew,ctx.strokeRect(-this.w/2,-this.h/2,this.w,this.h)),ctx.restore()},Turtle.prototype.penDown=function(){this.stakemoviment.push([0,"pendown"])},Turtle.prototype.penUp=function(){this.stakemoviment.push([0,"penup"])},Turtle.prototype.changeToneFor=function(t){this.color.r+=t,this.color.g+=t,this.color.b+=t,this.color.r>255&&(this.color.r=this.color.r-255),this.color.g>255&&(this.color.g=this.color.g-255),this.color.b>255&&(this.color.b=this.color.b-255),this.stakemoviment.push(["rgb("+this.color.r+","+this.color.g+","+this.color.b+")","changecolor"])},Turtle.prototype.changeColorTo=function(t,e,i){this.color=null==e&&null==i?t:{r:t,g:e,b:i},this.color.r>255&&(this.color.r=this.color.r-255),this.color.g>255&&(this.color.g=this.color.g-255),this.color.b>255&&(this.color.b=this.color.b-255),this.stakemoviment.push(["rgb("+this.color.r+","+this.color.g+","+this.color.b+")","changecolor"])},Turtle.prototype.changeColorFor=function(t){this.changecolorup?("r"!=this.lastcolor&&255!=this.color.r?(this.color.r+=t,this.color.r>255&&(this.color.r=255,this.lastcolor="r")):"g"!=this.lastcolor&&255!=this.color.g?(this.color.g+=t,this.color.g>255&&(this.color.g=255,this.lastcolor="g")):"b"!=this.lastcolor&&255!=this.color.b&&(this.color.b+=t,this.color.b>255&&(this.color.b=255,this.lastcolor="b")),255==this.color.r&&255==this.color.g&&255==this.color.b&&(this.changecolorup=!1)):("r"!=this.lastcolor&&0!=this.color.r?(this.color.r-=t,this.color.r<0&&(this.color.r=0,this.lastcolor="r")):"g"!=this.lastcolor&&0!=this.color.g?(this.color.g-=t,this.color.g<0&&(this.color.g=0,this.lastcolor="g")):"b"!=this.lastcolor&&0!=this.color.b&&(this.color.b-=t,this.color.b<0&&(this.color.b=0,this.lastcolor="b")),0==this.color.r&&0==this.color.g&&0==this.color.b&&(this.changecolorup=!0)),this.stakemoviment.push(["rgb("+this.color.r+","+this.color.g+","+this.color.b+")","changecolor"])},Turtle.prototype.changeSizeTo=function(t){this.linew=t,this.stakemoviment.push([this.linew,"changesize"])},Turtle.prototype.changeSizeFor=function(t){this.linew+=t,this.stakemoviment.push([this.linew,"changesize"])},Turtle.prototype.print=function(){},Turtle.prototype.clean=function(){this.stakemoviment.push([this.stakemoviment.length,"clean"])},Turtle.prototype.forward=function(t){this.stakemoviment.push([t,"forward"])},Turtle.prototype.back=function(t){this.stakemoviment.push([t,"back"])},Turtle.prototype.left=function(t){this.stakemoviment.push([-t,"left"])},Turtle.prototype.right=function(t){this.stakemoviment.push([t,"right"])},Turtle.prototype.update=function(){this.pintaldline(),this.stakemoviment.length>0&&(movetox=this.x,movetoy=this.y,"pendown"==this.stakemoviment[0][1]?(this.stakealdlines.push(this.stakemoviment[0]),this.pendown=!0,this.stakemoviment.splice(0,1)):"penup"==this.stakemoviment[0][1]?(this.stakealdlines.push(this.stakemoviment[0]),this.pendown=!1,this.stakemoviment.splice(0,1)):"changecolor"==this.stakemoviment[0][1]?(this.stakealdlines.push(this.stakemoviment[0]),this.stakemoviment.splice(0,1)):"changesize"==this.stakemoviment[0][1]?(this.stakealdlines.push(this.stakemoviment[0]),this.stakemoviment.splice(0,1)):"clean"==this.stakemoviment[0][1]?(this.stakealdlines.push(this.stakemoviment[0]),this.stakemoviment.splice(0,1)):"right"==this.stakemoviment[0][1]||"left"==this.stakemoviment[0][1]?(this.stakealdlines.push([this.stakemoviment[0][0],this.stakemoviment[0][1],movetox,movetoy]),ctx.translate(movetox,movetoy),ctx.rotate(this.stakemoviment[0][0]*Math.PI/180),ctx.translate(-movetox,-movetoy),this.stakemoviment.splice(0,1)):"forward"!=this.stakemoviment[0][1]&&"back"!=this.stakemoviment[0][1]||("forward"==this.stakemoviment[0][1]?this.y-=this.velocity:"back"==this.stakemoviment[0][1]&&(this.y+=this.velocity),this.stepcurrent+=this.velocity,this.pendown&&(ctx.beginPath(),ctx.moveTo(movetox,movetoy),ctx.lineTo(this.x,this.y),ctx.strokeStyle="rgb("+this.color.r+","+this.color.g+","+this.color.b+")",ctx.stroke(),ctx.closePath()),this.stepcurrent>=this.stakemoviment[0][0]?(this.stakemoviment.splice(0,1),this.stepcurrent=0,this.stakealdlines[this.stakealdlines.length-1][2]=this.x,this.stakealdlines[this.stakealdlines.length-1][3]=this.y,this.isnewcommand=!0):this.isnewcommand?(this.isnewcommand=!1,this.stakealdlines.push([movetox,movetoy,this.x,this.y,this.stakemoviment[0][1]])):(this.stakealdlines[this.stakealdlines.length-1][2]=this.x,this.stakealdlines[this.stakealdlines.length-1][3]=this.y)),this.imgturtle.setPosition(this.x-this.imgturtle.getWidth()/2,this.y-this.imgturtle.getHeight()),this.imgturtle.print())},Turtle.prototype.pintaldline=function(){ctx.save(),ctx.setTransform(1,0,0,1,0,0);for(var t=0;t<this.stakealdlines.length;t++)"pendown"!=this.stakealdlines[t][1]?"penup"!=this.stakealdlines[t][1]?"changecolor"!=this.stakealdlines[t][1]?"changesize"!=this.stakealdlines[t][1]?"clean"!=this.stakealdlines[t][1]?"right"!=this.stakealdlines[t][1]&&"left"!=this.stakealdlines[t][1]?this.penolddown&&("forward"==this.stakealdlines[t][4]?(ctx.beginPath(),ctx.moveTo(this.stakealdlines[t][0],this.stakealdlines[t][1]),ctx.lineTo(this.stakealdlines[t][2],this.stakealdlines[t][3]),ctx.strokeStyle=this.stroke,ctx.stroke(),ctx.closePath()):"back"==this.stakealdlines[t][4]&&(ctx.beginPath(),ctx.moveTo(this.stakealdlines[t][2],this.stakealdlines[t][3]),ctx.lineTo(this.stakealdlines[t][0],this.stakealdlines[t][1]),ctx.strokeStyle=this.stroke,ctx.stroke(),ctx.closePath())):(ctx.translate(this.stakealdlines[t][2],this.stakealdlines[t][3]),ctx.rotate(this.stakealdlines[t][0]*Math.PI/180),ctx.translate(-this.stakealdlines[t][2],-this.stakealdlines[t][3])):this.stakealdlines.slice(0,this.stakealdlines[t][0]):ctx.lineWidth=this.stakealdlines[t][0]:ctx.strokeStyle=this.stakealdlines[t][0]:this.penolddown=!1:this.penolddown=!0;0==this.stakemoviment.length&&(this.imgturtle.setPosition(this.x-this.imgturtle.getWidth()/2,this.y-this.imgturtle.getHeight()),this.imgturtle.print()),ctx.restore()},StarterEngine=function(t,e){this.width=t,this.height=e,this.debugmode=!1,this.starterlogo=null,window.onload=function(){window.canvas=document.getElementById("gamecanvas"),window.ctx=canvas.getContext("2d"),window.mlevel=new ManagerLevel,window.loader=new ManagerLoader(function(){this.gameReady(),this.startGame()}.bind(this)),window.teclado=new ManagerInputs,window.storage=new ManagerStorage,this.setResources(),this.beginLoad()}.bind(this),red={r:255,b:0,g:0},green={r:0,b:0,g:255},blue={r:0,b:255,g:0},yellow={r:255,b:0,g:255},cian={r:0,b:255,g:255},black={r:0,b:0,g:0},white={r:255,b:255,g:255},orange={r:255,b:0,g:150},purple={r:255,b:255,g:0},gray={r:255,b:0,g:0}},StarterEngine.prototype.beginLoad=function(){loader.loading()},StarterEngine.prototype.startGame=function(){mlevel.levels[mlevel.currentLevel].startFunction(),this.loopgame(ctx)},StarterEngine.prototype.loopgame=function(t){mlevel.print(t),requestAnimFrame(function(){se.loopgame(t)})},StarterEngine.prototype.gameReady=function(){},StarterEngine.prototype.setResources=function(){},StarterEngine.prototype.startTurtle=function(){this.setResources=function(){loader.addStarterResource("turtle","turtle.png","image")},this.gameReady=function(){var t=new Levels;t.setFunctionStart(setTurtle),mlevel.addLevel(t)}},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};